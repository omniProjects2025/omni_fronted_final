<app-header></app-header>
<ng-container *ngIf="filteredDepartments.length">
  <section class="bg-white" *ngFor="let dep of filteredDepartments">
    <div class="container">
      <ng-container>
        <div class="row pt-5">
          <!-- Left Card Section -->
          <div class="col-lg-7 col-md-12 mb-4">
            <div class="card">
              <img
                src="https://img.freepik.com/free-photo/team-young-specialist-doctors-standing-corridor-hospital_1303-21202.jpg?ga=GA1.1.900482830.1739181171&semt=ais_hybrid"
                class="border_rad" alt="Medical Image" height="" width="">
              <div class="card-body">
                <h4 class="titile_txt">{{ dep.name }}</h4>
                <p class="description_font">{{ dep.description }}</p>
              </div>
            </div>
          </div>
          <!-- Right Enquiry Form -->
          <div class="col-lg-5 col-md-12 d-flex flex-column align-items-center">
            <div class="text-center w-100 mt-5">
              <h5
                class="text-black fw-bold text-center position-relative d-flex align-items-center justify-content-center">
                <span class="border-line me-2"></span> ENQUIRY <span class="border-line ms-2"></span>
              </h5>
            </div>

            <!-- Form -->
            <form class="card p-4 form-card w-100" #enquiryForm="ngForm">
              <div class="mb-3 position-relative">
                <input type="text" class="form-control floating-input" name="fullName" placeholder=" "
                  [(ngModel)]="enquiry.fullName" required>
                <label class="floating-label">Full Name</label>
              </div>

              <div class="mb-3 position-relative">
                <input type="tel" class="form-control floating-input" name="phoneNumber" placeholder=" "
                  [(ngModel)]="enquiry.phoneNumber" required>
                <label class="floating-label">Phone Number</label>
              </div>

              <div class="mb-3 position-relative">
                <input type="email" class="form-control floating-input" name="emailId" placeholder=" "
                  [(ngModel)]="enquiry.emailId">
                <label class="floating-label">Email ID</label>
              </div>

              <!-- Non-editable Department -->
              <div class="mb-3 position-relative">
                <input type="text" class="form-control floating-input" [value]="getDepartmentName()" readonly>
              </div>

              <!-- Submit Button -->
              <div class="text-center w-100 my-4" (click)="submitEnquiry()">
                <button type="submit" class="btn btn-outline-dark px-5 py-1 submit-btn">Submit</button>
              </div>
            </form>
          </div>


        </div>
      </ng-container>
    </div>
    <div class="container">
      <div class="border_gray col-12"></div>
    </div>
    <div class="container pt-3 pb-3 device">
      <div class="row">
        <!-- Doctor Cards (Scrollable Section) -->
        <div class="col-md-8 col-12 no-scrollbar" style="max-height: calc(100vh - 40px); overflow-y: scroll;">
          <div class="row d-flex align-items-center justify-content-center gap-3 padding_none">
            <div class="col-lg-4 col-md-6 col-sm-6 col-12 board_container mt-3 mt-lg-0 mt-md-0"
              *ngFor="let doctor of filteredDoctors">
              <div class="card doctor-card text-center">
                <img [src]="doctor.image" class="card-img-top doctor-img" alt="{{ doctor.name }}" />
                <div class="doctor_card_body text-white">
                  <h5 class="card-title">{{ doctor.name }}</h5>
                  <p class="card-text">{{ doctor.designation }}</p>
                </div>
                <div class="doctor_location">
                  <span>{{ doctor.location }}</span>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Search and Info Panel (Fixed Panel) -->
        <div class="col-md-4 col-12" style="position: sticky; top: 10px; z-index: 100;">
          <div class="card p-4 shadow-lg border border-dark rounded-4">
            <input type="text" class="form-control mb-3" placeholder="Search by Doctor" [(ngModel)]="searchName" />
            <select class="form-select mb-3 custom_select_btn" [(ngModel)]="selectedLocation">
              <option value="">Select Location</option>
              <option class="" *ngFor="let location of locations" [value]="location.id">{{ location.name }}</option>
            </select>
            <div class="d-flex align-items-center justify-content-center">
              <button class="btn search_btn " (click)="filterDoctors()">Search</button>
            </div>
          </div>
          <div class="card mt-4 p-4 border border-dark rounded-4 shadow-sm">
            <h5 class="text-primary fw-bold">{{dep['name']}}</h5>
            <p class="text-muted small">{{dep['package_info']}}</p>
          </div>
        </div>
      </div>
    </div>


  </section>
</ng-container>

<app-footer></app-footer>